:root{
  /* Viewport (camera) size; change as you like */
  --stage-w: 800px;
  --stage-h: 450px;

  /* Logical sprite pixels are scaled by this factor */
  --pixel-size: 8;

  /* Colors */
  --bg1: #102a1b;
  --bg2: #081d12;

  /* Classic Game Boy-inspired 4 tone palette */
  --gb-darkest: #0f380f;
  --gb-dark: #2e5d2c;
  --gb-light: #6a8f2a;
  --gb-lightest: #9bbc0f;

  /* Player palette (override any time) */
  --c-skin: var(--gb-lightest);
  --c-hair: var(--gb-darkest);
  --c-shirt: var(--gb-light);
  --c-shirt-shadow: var(--gb-dark);
  --c-pants: var(--gb-darkest);
  --c-eye: var(--gb-darkest);
  --c-outline: rgba(15, 56, 15, 0.35);

  /* World */
  --world-w: 2000px;  /* world is larger than the stage */
  --world-h: 1200px;

  --player-scale: 0.2;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: radial-gradient(1000px 600px at 50% -100px, #0e1624, #050810 60%);
  color: #d6e4ff;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}

#game{
  width: var(--stage-w);
  height: var(--stage-h);
  margin: 24px auto;
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4), inset 0 0 0 1px rgba(255,255,255,0.06);
  background: linear-gradient(180deg, var(--bg2), var(--bg1));
  user-select: none;
  cursor: crosshair;
}

#world{
  width: var(--world-w);
  height: var(--world-h);
  position: absolute;
  left: 0; top: 0;
  /* The camera pans this via transform. */
  background:
    radial-gradient(800px 600px at 30% 20%, rgba(255,255,255,0.03), transparent 60%),
    radial-gradient(900px 700px at 80% 70%, rgba(255,255,255,0.03), transparent 60%),
    linear-gradient(180deg, #0f1b2a, #0c1522);
}

/* Optional debug grid (added/removed by Debug toggle) */
#world.grid-on{
  background-image:
    repeating-linear-gradient(to right, rgba(255,255,255,0.06) 0 1px, transparent 1px 8px),
    repeating-linear-gradient(to bottom, rgba(255,255,255,0.06) 0 1px, transparent 1px 8px),
    radial-gradient(800px 600px at 30% 20%, rgba(255,255,255,0.03), transparent 60%),
    radial-gradient(900px 700px at 80% 70%, rgba(255,255,255,0.03), transparent 60%),
    linear-gradient(180deg, #0f1b2a, #0c1522);
}

/* Entity DOM root (positioned in world coordinates) */
.entity{
  position:absolute;
  left:0; top:0;
  will-change: transform;
}

/* --- Sprite handling --- */
.sprite{
  position:absolute;
  transform-origin: top left;
  image-rendering: pixelated;
  background-repeat: no-repeat;
  --sprite-scale: 1;
  transform: translateZ(0) scale(var(--sprite-scale));
}

.sprite.flip-x{
  transform: translateZ(0) scale(calc(var(--sprite-scale) * -1), var(--sprite-scale));
}

.sprite.person{
  --sprite-scale: var(--player-scale, 0.2);
  width: calc(1024px / 3);
  height: calc(1024px / 3);
  background-image: url('../sprites/ChatGPT Image Nov 1, 2025, 11_37_03 PM.png');
  background-size: 300% 300%;
  --row-y: 0%;
  background-position: 50% var(--row-y);
  filter:
    drop-shadow(0 1px 0 var(--c-outline))
    drop-shadow(0 -1px 0 var(--c-outline))
    drop-shadow(1px 0 0 var(--c-outline))
    drop-shadow(-1px 0 0 var(--c-outline));
}

.sprite.person[data-dir="down"]{ --row-y: 0%; }
.sprite.person[data-dir="left"],
.sprite.person[data-dir="right"]{ --row-y: 50%; }
.sprite.person[data-dir="up"]{ --row-y: 100%; }

@keyframes walk-row {
  from { background-position: 0% var(--row-y); }
  to { background-position: 100% var(--row-y); }
}

.state--idle .sprite.person{ animation: none; background-position: 50% var(--row-y); }
.state--walk .sprite.person{ animation: walk-row 420ms steps(3) infinite; }

/* --- Collidable obstacle visual --- */
.obstacle{
  position:absolute;
  background: rgba(220, 90, 120, 0.2);
  border: 1px solid rgba(220, 90, 120, 0.5);
  border-radius: 4px;
}

/* Debug overlay */
#debug{
  position:absolute; left:8px; bottom:8px;
  padding:6px 8px; font: 11px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  background: rgba(0,0,0,0.5);
  border:1px solid rgba(255,255,255,0.15);
  border-radius: 8px;
  white-space: pre; pointer-events:none;
}
